{"ast":null,"code":"import { reactive, toRefs } from 'vue';\nimport { get } from '../../utils/request';\nimport Docker from '../../components/Docker';\nconst useOrderListEffect = () => {\n  const data = reactive({\n    list: []\n  });\n  const getNearbyList = async () => {\n    const result = await get('/api/order');\n    if (result?.errno === 0 && result?.data?.length) {\n      const orderList = result.data;\n      orderList.forEach(order => {\n        const products = order.products;\n        let totalPrice = 0;\n        let to;\n        products.forEach(productItem => {\n          totalPrice += productItem.product.price * productItem.orderSales;\n        });\n        order.total = totalPrice;\n      });\n      console.log(orderList);\n      // data.list = result.data\n    }\n  };\n  getNearbyList();\n  const {\n    list\n  } = toRefs(data);\n  return {\n    list\n  };\n};\nexport default {\n  name: 'OrderList',\n  components: {\n    Docker\n  },\n  setup() {\n    const list = useOrderListEffect();\n    return {\n      list\n    };\n  }\n};","map":{"version":3,"names":["reactive","toRefs","get","Docker","useOrderListEffect","data","list","getNearbyList","result","errno","length","orderList","forEach","order","products","totalPrice","to","productItem","product","price","orderSales","total","console","log","name","components","setup"],"sources":["D:\\Besktop\\jingdong\\src\\views\\orderList\\OrderList.vue"],"sourcesContent":["<template>\r\n    <div class=\"wrapper\">\r\n      <div class=\"title\">我的订单</div>\r\n      <div class=\"orders\">\r\n        <div class=\"order\"\r\n        v-for=\"(item, index) in list\"\r\n        :key=\"index\"\r\n        >\r\n          <div class=\"order_title\">\r\n            {{ item.name }}\r\n            <spen class=\"order_status\">\r\n              {{ item.isCanceled ? '已取消' : '已下单' }}\r\n            </spen>\r\n          </div>\r\n          <div class=\"order_content\">\r\n            <div class=\"order_content_imgs\">\r\n              <template\r\n              v-for=\"(innerItem, innerIndex) in item.products\"\r\n              :key=\"innerIndex\"\r\n              >\r\n              <img\r\n              :src=\"innerItem.products.img\"\r\n              class=\"order_content_img\"\r\n              v-if=\"innerIndex <= 3\"\r\n              />\r\n            </template>\r\n            </div>\r\n            <div class=\"order_content_info\">\r\n              <div class=\"order_content_price\">￥ {{item.totalPrice}}</div>\r\n              <div class=\"order_content_count\">共 {{ item.products.length }} 件</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <Docker :currentIndex=\"2\"/>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs } from 'vue'\r\nimport { get } from '../../utils/request'\r\nimport Docker from '../../components/Docker'\r\n\r\nconst useOrderListEffect = () => {\r\n  const data = reactive({ list: [] })\r\n  const getNearbyList = async () => {\r\n    const result = await get('/api/order')\r\n    if (result?.errno === 0 && result?.data?.length) {\r\n      const orderList = result.data\r\n      orderList.forEach((order) => {\r\n        const products = order.products\r\n        let totalPrice = 0\r\n        let to\r\n        products.forEach((productItem) => {\r\n          totalPrice += productItem.product.price * productItem.orderSales\r\n        })\r\n        order.total = totalPrice\r\n      })\r\n      console.log(orderList)\r\n      // data.list = result.data\r\n    }\r\n  }\r\n  getNearbyList()\r\n  const { list } = toRefs(data)\r\n  return { list }\r\n}\r\n\r\nexport default {\r\n  name: 'OrderList',\r\n  components: { Docker },\r\n  setup () {\r\n    const list = useOrderListEffect()\r\n    return { list }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../style/viriables.scss';\r\n    .wrapper {\r\n      overflow-y: auto;\r\n      position: absolute;\r\n      left: 0;\r\n      top: 0;\r\n      bottom: 5px;\r\n      right: 0;\r\n      background: rgb(248, 248, 248);\r\n    }\r\n    .title {\r\n      line-height: 44px;\r\n      background: $bg_color;\r\n      font-size: 16px;\r\n      color: $content-fontcolor;\r\n      text-align: center;\r\n    }\r\n    .orders {\r\n\r\n    }\r\n    .order {\r\n      margin: 16px 18px;\r\n      padding: 16px;\r\n      background: $bg_color;\r\n      &_title {\r\n        margin-bottom: 16px;\r\n        line-height: 22px;\r\n        font-size: 16px;\r\n        color: $content-fontcolor;\r\n      }\r\n      &_status {\r\n        float: right;\r\n        font-size: 14px;\r\n        color: $light-fontColor;\r\n      }\r\n      &_content {\r\n        display: flex;\r\n        &_imgs {\r\n          flex: 1;\r\n        }\r\n        &_img {\r\n          width: 40px;\r\n          height: 40px;\r\n          margin-right: 12px;\r\n        }\r\n        &_info {\r\n          width: 70px;\r\n        }\r\n        &_price {\r\n          margin-bottom: 4px;\r\n          line-height: 20px;\r\n          font-size: 14px;\r\n          color: $highlight-fontColor;\r\n          text-align: right;\r\n        }\r\n        &_count {\r\n          line-height: 14px;\r\n          font-size: 12px;\r\n          color: $content-fontcolor;\r\n          text-align: right;\r\n        }\r\n      }\r\n    }\r\n</style>\r\n"],"mappings":"AAuCA,SAASA,QAAQ,EAAEC,MAAK,QAAS,KAAI;AACrC,SAASC,GAAE,QAAS,qBAAoB;AACxC,OAAOC,MAAK,MAAO,yBAAwB;AAE3C,MAAMC,kBAAiB,GAAIA,CAAA,KAAM;EAC/B,MAAMC,IAAG,GAAIL,QAAQ,CAAC;IAAEM,IAAI,EAAE;EAAG,CAAC;EAClC,MAAMC,aAAY,GAAI,MAAAA,CAAA,KAAY;IAChC,MAAMC,MAAK,GAAI,MAAMN,GAAG,CAAC,YAAY;IACrC,IAAIM,MAAM,EAAEC,KAAI,KAAM,KAAKD,MAAM,EAAEH,IAAI,EAAEK,MAAM,EAAE;MAC/C,MAAMC,SAAQ,GAAIH,MAAM,CAACH,IAAG;MAC5BM,SAAS,CAACC,OAAO,CAAEC,KAAK,IAAK;QAC3B,MAAMC,QAAO,GAAID,KAAK,CAACC,QAAO;QAC9B,IAAIC,UAAS,GAAI;QACjB,IAAIC,EAAC;QACLF,QAAQ,CAACF,OAAO,CAAEK,WAAW,IAAK;UAChCF,UAAS,IAAKE,WAAW,CAACC,OAAO,CAACC,KAAI,GAAIF,WAAW,CAACG,UAAS;QACjE,CAAC;QACDP,KAAK,CAACQ,KAAI,GAAIN,UAAS;MACzB,CAAC;MACDO,OAAO,CAACC,GAAG,CAACZ,SAAS;MACrB;IACF;EACF;EACAJ,aAAa,CAAC;EACd,MAAM;IAAED;EAAK,IAAIL,MAAM,CAACI,IAAI;EAC5B,OAAO;IAAEC;EAAK;AAChB;AAEA,eAAe;EACbkB,IAAI,EAAE,WAAW;EACjBC,UAAU,EAAE;IAAEtB;EAAO,CAAC;EACtBuB,KAAIA,CAAA,EAAK;IACP,MAAMpB,IAAG,GAAIF,kBAAkB,CAAC;IAChC,OAAO;MAAEE;IAAK;EAChB;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}