{"ast":null,"code":"import { useStore } from 'vuex';\nimport { computed } from 'vue';\nexport const useCommonCartEffect = shopId => {\n  const store = useStore();\n  const cartList = store.state.cartList;\n  const changeCartItemInfo = (shopId, productId, productInfo, num) => {\n    store.commit('changeCartItemInfo', {\n      shopId,\n      productId,\n      productInfo,\n      num\n    });\n  };\n  const productList = computed(() => {\n    const productList = cartList[shopId]?.productList || {};\n    // const notEmptyProductList = {}\n    for (const i in productList) {\n      console.log(productList[i]);\n    }\n    return productList;\n  });\n  const shopName = computed(() => {\n    const shopName = cartList[shopId]?.shopName || '';\n    return shopName;\n  });\n  const calculations = computed(() => {\n    const productList = cartList[shopId]?.productList;\n    const result = {\n      total: 0,\n      price: 0,\n      allChecked: true\n    };\n    if (productList) {\n      for (const i in productList) {\n        const product = productList[i];\n        result.total += product.count;\n        if (product.check) {\n          result.price += product.count * product.price;\n        }\n        if (product.count > 0 && !product.check) {\n          result.allChecked = false;\n        }\n      }\n    }\n    result.price = result.price.toFixed(2);\n    return result;\n  });\n  return {\n    cartList,\n    changeCartItemInfo,\n    productList,\n    shopName,\n    calculations\n  };\n};","map":{"version":3,"names":["useStore","computed","useCommonCartEffect","shopId","store","cartList","state","changeCartItemInfo","productId","productInfo","num","commit","productList","i","console","log","shopName","calculations","result","total","price","allChecked","product","count","check","toFixed"],"sources":["D:/Besktop/jingdong/src/effects/cartEffects.js"],"sourcesContent":["import { useStore } from 'vuex'\r\nimport { computed } from 'vue'\r\nexport const useCommonCartEffect = (shopId) => {\r\n  const store = useStore()\r\n  const cartList = store.state.cartList\r\n  const changeCartItemInfo = (shopId, productId, productInfo, num) => {\r\n    store.commit('changeCartItemInfo', { shopId, productId, productInfo, num })\r\n  }\r\n  const productList = computed(() => {\r\n    const productList = cartList[shopId]?.productList || {}\r\n    // const notEmptyProductList = {}\r\n    for (const i in productList) {\r\n      console.log(productList[i])\r\n    }\r\n    return productList\r\n  })\r\n\r\n  const shopName = computed(() => {\r\n    const shopName = cartList[shopId]?.shopName || ''\r\n    return shopName\r\n  })\r\n\r\n  const calculations = computed(() => {\r\n    const productList = cartList[shopId]?.productList\r\n    const result = { total: 0, price: 0, allChecked: true }\r\n    if (productList) {\r\n      for (const i in productList) {\r\n        const product = productList[i]\r\n        result.total += product.count\r\n        if (product.check) {\r\n          result.price += (product.count * product.price)\r\n        }\r\n        if (product.count > 0 && !product.check) {\r\n          result.allChecked = false\r\n        }\r\n      }\r\n    }\r\n    result.price = result.price.toFixed(2)\r\n    return result\r\n  })\r\n\r\n  return { cartList, changeCartItemInfo, productList, shopName, calculations }\r\n}\r\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,MAAM;AAC/B,SAASC,QAAQ,QAAQ,KAAK;AAC9B,OAAO,MAAMC,mBAAmB,GAAIC,MAAM,IAAK;EAC7C,MAAMC,KAAK,GAAGJ,QAAQ,CAAC,CAAC;EACxB,MAAMK,QAAQ,GAAGD,KAAK,CAACE,KAAK,CAACD,QAAQ;EACrC,MAAME,kBAAkB,GAAGA,CAACJ,MAAM,EAAEK,SAAS,EAAEC,WAAW,EAAEC,GAAG,KAAK;IAClEN,KAAK,CAACO,MAAM,CAAC,oBAAoB,EAAE;MAAER,MAAM;MAAEK,SAAS;MAAEC,WAAW;MAAEC;IAAI,CAAC,CAAC;EAC7E,CAAC;EACD,MAAME,WAAW,GAAGX,QAAQ,CAAC,MAAM;IACjC,MAAMW,WAAW,GAAGP,QAAQ,CAACF,MAAM,CAAC,EAAES,WAAW,IAAI,CAAC,CAAC;IACvD;IACA,KAAK,MAAMC,CAAC,IAAID,WAAW,EAAE;MAC3BE,OAAO,CAACC,GAAG,CAACH,WAAW,CAACC,CAAC,CAAC,CAAC;IAC7B;IACA,OAAOD,WAAW;EACpB,CAAC,CAAC;EAEF,MAAMI,QAAQ,GAAGf,QAAQ,CAAC,MAAM;IAC9B,MAAMe,QAAQ,GAAGX,QAAQ,CAACF,MAAM,CAAC,EAAEa,QAAQ,IAAI,EAAE;IACjD,OAAOA,QAAQ;EACjB,CAAC,CAAC;EAEF,MAAMC,YAAY,GAAGhB,QAAQ,CAAC,MAAM;IAClC,MAAMW,WAAW,GAAGP,QAAQ,CAACF,MAAM,CAAC,EAAES,WAAW;IACjD,MAAMM,MAAM,GAAG;MAAEC,KAAK,EAAE,CAAC;MAAEC,KAAK,EAAE,CAAC;MAAEC,UAAU,EAAE;IAAK,CAAC;IACvD,IAAIT,WAAW,EAAE;MACf,KAAK,MAAMC,CAAC,IAAID,WAAW,EAAE;QAC3B,MAAMU,OAAO,GAAGV,WAAW,CAACC,CAAC,CAAC;QAC9BK,MAAM,CAACC,KAAK,IAAIG,OAAO,CAACC,KAAK;QAC7B,IAAID,OAAO,CAACE,KAAK,EAAE;UACjBN,MAAM,CAACE,KAAK,IAAKE,OAAO,CAACC,KAAK,GAAGD,OAAO,CAACF,KAAM;QACjD;QACA,IAAIE,OAAO,CAACC,KAAK,GAAG,CAAC,IAAI,CAACD,OAAO,CAACE,KAAK,EAAE;UACvCN,MAAM,CAACG,UAAU,GAAG,KAAK;QAC3B;MACF;IACF;IACAH,MAAM,CAACE,KAAK,GAAGF,MAAM,CAACE,KAAK,CAACK,OAAO,CAAC,CAAC,CAAC;IACtC,OAAOP,MAAM;EACf,CAAC,CAAC;EAEF,OAAO;IAAEb,QAAQ;IAAEE,kBAAkB;IAAEK,WAAW;IAAEI,QAAQ;IAAEC;EAAa,CAAC;AAC9E,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}