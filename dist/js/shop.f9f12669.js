"use strict";(self["webpackChunkjingdong"]=self["webpackChunkjingdong"]||[]).push([[883],{9174:function(t,a,c){c.d(a,{K:function(){return s}});var e=c(6278),n=c(641);const s=t=>{const a=(0,e.Pj)(),c=a.state.cartList,s=(t,c,e,n)=>{a.commit("changeCartItemInfo",{shopId:t,productId:c,productInfo:e,num:n})},o=(0,n.EW)((()=>{const a=c[t]?.productList||{},e={};for(const t in a){const c=a[t];c.count>0&&(e[t]=c)}return e})),r=(0,n.EW)((()=>{const a=c[t]?.shopName||"";return a})),i=(0,n.EW)((()=>{const a=c[t]?.productList,e={total:0,price:0,allChecked:!0};if(a)for(const t in a){const c=a[t];e.total+=c.count,c.check&&(e.price+=c.count*c.price),c.count>0&&!c.check&&(e.allChecked=!1)}return e.price=e.price.toFixed(2),e}));return{cartList:c,changeCartItemInfo:s,productList:o,shopName:r,calculations:i}}},2990:function(t,a,c){c.d(a,{A:function(){return k}});var e=c(641),n=c(33);const s={class:"shop"},o=["src"],r={class:"shop_content_title"},i={class:"shop_content_tags"},l={class:"shop_content_tag"},d={class:"shop_content_tag"},u={class:"shop_content_tag"},p={class:"shop_content_highlight"};function h(t,a,c,h,m,C){return(0,e.uX)(),(0,e.CE)("div",s,[(0,e.Lk)("img",{src:c.item.imgUrl,class:"shop_img"},null,8,o),(0,e.Lk)("div",{class:(0,n.C4)({shop_content:!0,"shop_content--bordered":!t.history})},[(0,e.Lk)("div",r,(0,n.v_)(c.item.name),1),(0,e.Lk)("div",i,[(0,e.Lk)("span",l,"月售："+(0,n.v_)(c.item.sales),1),(0,e.Lk)("span",d,"起送："+(0,n.v_)(c.item.expressLimit),1),(0,e.Lk)("span",u,"基础运费："+(0,n.v_)(c.item.expressPrice),1)]),(0,e.Lk)("p",p,(0,n.v_)(c.item.slogan),1)],2)])}var m={name:"ShopInfo",props:["item"]},C=c(6262);const _=(0,C.A)(m,[["render",h],["__scopeId","data-v-01524726"]]);var k=_},670:function(t,a,c){c.r(a),c.d(a,{default:function(){return Lt}});var e=c(641),n=c(3751);const s=t=>((0,e.Qi)("data-v-ec0bab16"),t=t(),(0,e.jt)(),t),o={class:"wrapper"},r={class:"search"},i={class:"search_content"},l=s((()=>(0,e.Lk)("input",{class:"search_content_input",placeholder:"请输入商品名称"},null,-1)));function d(t,a,c,s,d,u){const p=(0,e.g2)("spen"),h=(0,e.g2)("ShopInfo"),m=(0,e.g2)("Content"),C=(0,e.g2)("Cart");return(0,e.uX)(),(0,e.CE)("div",o,[(0,e.Lk)("div",r,[(0,e.Lk)("div",{class:"search_back iconfont",onClick:a[0]||(a[0]=(...t)=>s.handleBackClik&&s.handleBackClik(...t))},""),(0,e.Lk)("div",i,[(0,e.bF)(p,{class:"search_content_icon iconfont"},{default:(0,e.k6)((()=>[(0,e.eW)("")])),_:1}),l])]),(0,e.bo)((0,e.bF)(h,{item:s.item,hideBorder:!0},null,8,["item"]),[[n.aG,s.item.imgUrl]]),(0,e.bF)(m,{shopName:s.item.name},null,8,["shopName"]),(0,e.bF)(C)])}var u=c(953),p=c(5220),h=c(5659),m=c(2990),C=c(33);const _=t=>((0,e.Qi)("data-v-3b2a53a6"),t=t(),(0,e.jt)(),t),k={class:"content"},g={class:"category"},v=["onClick"],L={class:"product"},I=["src"],f={class:"product_item_detail"},b={class:"product_item_title"},w={class:"product_item_sales"},E={class:"product_item_price"},P=_((()=>(0,e.Lk)("span",{class:"product_item_yen"},"¥",-1))),y={class:"product_item_origin"},W={class:"product_number"},S=["onClick"],T=["onClick"];function X(t,a,c,n,s,o){return(0,e.uX)(),(0,e.CE)("div",k,[(0,e.Lk)("div",g,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(n.categories,(a=>((0,e.uX)(),(0,e.CE)("div",{class:(0,C.C4)({category_item:t.tuue,"category_item--active":n.currentTab===a.tab}),key:a.name,onClick:c=>t.handleCategoryClick(a.tab)},(0,C.v_)(a.name),11,v)))),128))]),(0,e.Lk)("div",L,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(n.list,(t=>((0,e.uX)(),(0,e.CE)("div",{class:"product_item",key:t._id},[(0,e.Lk)("img",{class:"product_item_img",src:t.imgUrl,alt:""},null,8,I),(0,e.Lk)("div",f,[(0,e.Lk)("h4",b,(0,C.v_)(t.name),1),(0,e.Lk)("p",w,"月售 "+(0,C.v_)(t.sales),1),(0,e.Lk)("p",E,[P,(0,e.eW)((0,C.v_)(t.price)+" ",1),(0,e.Lk)("span",y,"¥"+(0,C.v_)(t.oldPrice),1)])]),(0,e.Lk)("div",W,[(0,e.Lk)("span",{class:"product_number_minus iconfont",onClick:()=>{n.changeCartItem(n.shopId,t._id,t,-1,c.shopName)}},"",8,S),(0,e.eW)(" "+(0,C.v_)(n.getProductCartCount(n.shopId,t._id))+" ",1),(0,e.Lk)("span",{class:"product_number_plus iconfont",onClick:()=>{n.changeCartItem(n.shopId,t._id,t,1,c.shopName)}},"",8,T)])])))),128))])])}var K=c(6278),F=c(9174);const N=[{name:"全部商品",tab:"all"},{name:"秒杀",tab:"seckill"},{name:"新鲜水果",tab:"fruit"}],j=()=>{const t=(0,u.KR)(N[0].tab),a=a=>{t.value=a};return{currentTab:t,handleTabClick:a}},Q=(t,a)=>{const c=(0,u.Kh)({list:[]}),n=async e=>{const n=await(0,h.J)(`/api/shop/${a}/products`,{tab:t.value});console.log(n),0===n?.data.errno&&n?.data.data&&(c.list=n.data.data)};(0,e.nT)((()=>{n()}));const{list:s}=(0,u.QW)(c);return{list:s}},A=()=>{const t=(0,K.Pj)(),{changeCartItemInfo:a,cartList:c}=(0,F.K)(),e=(a,c)=>{t.commit("changeShopName",{shopId:a,shopName:c})},n=(t,c,n,s,o)=>{a(t,c,n,s),e(t,o)},s=(t,a)=>void 0===c?.[t]?.productList?.[a]?0:c?.[t]?.productList?.[a].count||0;return{cartList:c,changeCartItem:n,getProductCartCount:s}};var B={name:"Content",props:["shopName"],setup(){const t=(0,p.lq)(),a=t.params.id,{currentTab:c,handleTabClick:e}=j(),{list:n}=Q(c,a),{changeCartItem:s,cartList:o,getProductCartCount:r}=A();return{categories:N,currentTab:c,handleTabClick:e,list:n,shopId:a,cartList:o,changeCartItem:s,getProductCartCount:r}}},H=c(6262);const M=(0,H.A)(B,[["render",X],["__scopeId","data-v-3b2a53a6"]]);var U=M;const q=t=>((0,e.Qi)("data-v-0a5ae22e"),t=t(),(0,e.jt)(),t),x={class:"cart"},D={key:0,class:"product"},$={class:"product_header"},J=["innerHTML"],R={class:"product_header_clear"},G=["innerHTML","onClick"],O=["src"],z={class:"product_item_detail"},V={class:"product_item_title"},Y={class:"product_item_price"},Z=q((()=>(0,e.Lk)("span",{class:"product_item_yen"},"¥",-1))),tt={class:"product_item_origin"},at={class:"product_number"},ct=["onClick"],et=["onClick"],nt={class:"check"},st={class:"icon"},ot={class:"check_icon_tag"},rt={class:"check_info"},it={class:"check_info_price"},lt={class:"check_btn"};function dt(t,a,c,s,o,r){const i=(0,e.g2)("router-link");return(0,e.uX)(),(0,e.CE)(e.FK,null,[s.showCart&&s.calculations.total>0?((0,e.uX)(),(0,e.CE)("div",{key:0,class:"mask",onClick:a[0]||(a[0]=(...t)=>s.handleCarShowChange&&s.handleCarShowChange(...t))})):(0,e.Q3)("",!0),(0,e.Lk)("div",x,[s.showCart&&s.calculations.total>0?((0,e.uX)(),(0,e.CE)("div",D,[(0,e.Lk)("div",$,[(0,e.Lk)("div",{class:"product_header_all",onClick:a[1]||(a[1]=()=>s.setCartItemsChecked(s.shopId))},[(0,e.Lk)("span",{class:"product_header_icon iconfont",innerHTML:s.calculations.allChecked?"":""},null,8,J),(0,e.eW)(" 全选")]),(0,e.Lk)("div",R,[(0,e.Lk)("span",{class:"product_header_clear_btn",onClick:a[2]||(a[2]=()=>s.cleanCartProducts(s.shopId))},"清空购物车")])]),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(s.productList,(t=>((0,e.uX)(),(0,e.CE)("div",{key:t._id,class:"product_item"},[(0,e.Lk)("div",{class:"product_item_checked iconfont",innerHTML:t.checked?"":"",onClick:(0,n.D$)((()=>s.changeCartItemChecked(s.shopId,t._id)),["stop"])},null,8,G),(0,e.Lk)("img",{class:"product_item_img",src:t.imgUrl,alt:""},null,8,O),(0,e.Lk)("div",z,[(0,e.Lk)("h4",V,(0,C.v_)(t.name),1),(0,e.Lk)("p",Y,[Z,(0,e.eW)((0,C.v_)(t.price)+" ",1),(0,e.Lk)("span",tt,"¥"+(0,C.v_)(t.oldPrice),1)])]),(0,e.Lk)("div",at,[(0,e.Lk)("span",{class:"product_number_minus iconfont",onClick:()=>{s.changeCartItemInfo(s.shopId,t._id,t,-1)}},"",8,ct),(0,e.eW)(" "+(0,C.v_)(t.count||0)+" ",1),(0,e.Lk)("span",{class:"product_number_plus iconfont",onClick:()=>{s.changeCartItemInfo(s.shopId,t._id,t,1)}},"",8,et)])])))),128))])):(0,e.Q3)("",!0),(0,e.Lk)("div",nt,[(0,e.Lk)("div",st,[(0,e.Lk)("img",{src:"http://www.dell-lee.com/imgs/vue3/basket.png",class:"check_icon_img",onClick:a[3]||(a[3]=(...t)=>s.handleCarShowChange&&s.handleCarShowChange(...t))}),(0,e.Lk)("div",ot,(0,C.v_)(s.calculations.total),1)]),(0,e.Lk)("div",rt,[(0,e.eW)(" 总计："),(0,e.Lk)("span",it,"¥ "+(0,C.v_)(s.calculations.price),1)]),(0,e.Lk)("div",lt,[(0,e.bF)(i,{to:{path:`/OrderConfirmation/${s.shopId}`}},{default:(0,e.k6)((()=>[(0,e.eW)(" 去结算 ")])),_:1},8,["to"])])])])],64)}const ut=t=>{const a=(0,K.Pj)(),{calculations:c,productList:e,changeCartItemInfo:n}=(0,F.K)(t),s=(t,c)=>{a.commit("changeCartItemChecked",{shopId:t,productId:c})},o=t=>{a.commit("cleanCartProducts",{shopId:t})},r=()=>{a.commit("setCartItemsChecked",{shopId:t})};return{calculations:c,productList:e,changeCartItemInfo:n,changeCartItemChecked:s,cleanCartProducts:o,setCartItemsChecked:r}},pt=()=>{const t=(0,u.KR)(!1),a=()=>{t.value=!t.value};return{showCart:t,handleCarShowChange:a}};var ht={name:"Cart",setup(){const t=(0,p.lq)(),a=t.params.id,{calculations:c,productList:e,changeCartItemInfo:n,changeCartItemChecked:s,cleanCartProducts:o,setCartItemsChecked:r}=ut(a),{showCart:i,handleCarShowChange:l}=pt();return{calculations:c,shopId:a,productList:e,changeCartItemInfo:n,changeCartItemChecked:s,cleanCartProducts:o,setCartItemsChecked:r,showCart:i,handleCarShowChange:l}}};const mt=(0,H.A)(ht,[["render",dt],["__scopeId","data-v-0a5ae22e"]]);var Ct=mt;const _t=()=>{const t=(0,p.lq)(),a=(0,u.Kh)({item:{}}),c=async()=>{const c=await(0,h.J)("/api/shop",{id:t.params.id});console.log(c),0===c?.data.errno&&c?.data.data&&(a.item=c.data.data)},{item:e}=(0,u.QW)(a);return{item:e,getItemData:c}},kt=()=>{const t=(0,p.rd)(),a=()=>{t.back()};return a};var gt={name:"Shop",components:{ShopInfo:m.A,Content:U,Cart:Ct},setup(){const{item:t,getItemData:a}=_t(),c=kt();return a(),{item:t,handleBackClik:c}}};const vt=(0,H.A)(gt,[["render",d],["__scopeId","data-v-ec0bab16"]]);var Lt=vt}}]);
//# sourceMappingURL=shop.f9f12669.js.map